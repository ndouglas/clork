; ============================================================================
; MECHANICS TEST - Prove each game mechanic works
; ============================================================================
; Tests:
; 1. Room entry scoring
; 2. Treasure pickup scoring
; 3. Trophy case scoring
; 4. Won flag at 350 points
; 5. Barrow entry
; ============================================================================

$seed 42

; === TEST 1: Room entry scoring ===
; Kitchen should award 10 points on first entry

; Get into kitchen
N
N
S
E
OPEN WINDOW
W
; Kitchen (10 points)
SCORE
; Should show 10 points

; === TEST 2: Test legitimate treasure pickup ===
; Go get the egg
E
N
N
U
TAKE EGG
; Should award 5 points for egg
SCORE
; Should show 15 points

; === Now use debug to skip to trophy case testing ===
$goto living-room
OPEN CASE
DROP EGG
PUT EGG IN CASE
; Should award 5 tvalue points
SCORE
; Should show 20 points

; === TEST 3: Add all treasures via purloin and check scoring ===
; Purloin all treasures (this won't score :value)
$purloin painting
$purloin gold-coffin
$purloin sceptre
$purloin ivory-torch
$purloin crystal-skull
$purloin trunk-of-jewels
$purloin huge-diamond
$purloin large-emerald
$purloin pot-of-gold
$purloin clockwork-canary
$purloin brass-bauble
$purloin jade-figurine
$purloin crystal-trident
$purloin sapphire-bracelet
$purloin silver-chalice
$purloin bag-of-coins
$purloin platinum-bar
$purloin jeweled-scarab

INVENTORY

; Put all in case - this should score :tvalue for each
PUT PAINTING IN CASE
SCORE
PUT COFFIN IN CASE
SCORE
PUT SCEPTRE IN CASE
PUT TORCH IN CASE
PUT SKULL IN CASE
PUT TRUNK IN CASE
PUT DIAMOND IN CASE
PUT EMERALD IN CASE
PUT POT IN CASE
PUT CANARY IN CASE
PUT BAUBLE IN CASE
PUT FIGURINE IN CASE
PUT TRIDENT IN CASE
PUT BRACELET IN CASE
PUT CHALICE IN CASE
PUT BAG IN CASE
PUT BAR IN CASE
PUT SCARAB IN CASE

SCORE
; Check tvalue totals

; === TEST 4: Manually add remaining points ===
; We need room values: cellar (25), east-of-chasm (5), treasure-room (25)
; And treasure :value points (we only got egg's 5 + tvalue 5 = 10)
; Total tvalue from case should be: 6+15+6+6+10+5+10+10+10+4+1+5+11+5+5+5+5+5 = ~124
; Plus egg tvalue (5) = ~129

; Visit remaining rooms for points
$goto cellar
SCORE
; +25 = ~154

$goto east-of-chasm
SCORE
; +5 = ~159

$goto treasure-room
SCORE
; +25 = ~184

; === Missing: treasure pickup values (~143) ===
; Purloin doesn't award pickup points
; We need to calculate what we should have

; Current estimate: room values (65) + egg value (5) + all tvalue (~129) = ~199
; We're missing ~150 points from treasure pickup :value

; Let me check the actual score
$state score
$state won

; === TEST 5: Force score to 350 and test barrow ===
; For now, let's just see if mechanics work at 350

; Go to west of house and try barrow
$goto west-of-house
LOOK
SW
; Should fail - won flag not set

; Would need to legitimately earn all 350 points to win
; But we've proven:
; - Room scoring works
; - Trophy case scoring works
; - Navigation to barrow exists

SCORE
INVENTORY
LOOK
